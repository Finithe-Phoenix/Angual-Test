<section class="users-edit">
    <div class="row">
        <div class="col-1"></div>
        <div class="col-10">
            <div class="card">
                <div class="card-content">
                    <div class="card-body">
                        <ul ngbNav #nav="ngbNav" [activeId]="1" class="nav-tabs justify-content-left">
                            <li [ngbNavItem]="1">
                                <a ngbNavLink class="nav-link d-flex align-items-center">
                                    <i class="ft-file mr-1"></i>
                                    <span class="d-none d-sm-block">Datos Generales</span>
                                </a>
                                <ng-template ngbNavContent>
                                    <div class="mt-2" id="account">
                                        <div class="media">
                                            <img [src]="corporativo.Logo" alt="logo" class="mr-3" height="64" width="64">
                                            <div class="media-body">
                                                <h4>{{corporativo.NombreCorto}}</h4>
                                            </div>
                                        </div>
                                        <br>
                                        <br>
                                        <form novalidate [formGroup]="formdetalle" (ngSubmit)="actualizarCorporativo()">
                                            <div class="row">

                                                <div class="col-12 col-md-3">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="nombre-corto">Nombre corto</label>
                                                            <input type="text" id="nombre-corto" class="form-control" [placeholder]="corporativo.NombreCorto" formControlName="nombreCorto" [class.is-invalid]="nombreCortoSanitized" aria-invalid="false">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="fecha-incorporacion">Fecha de incorporación *</label>
                                                        <div class="controls input-group">
                                                            <input class="form-control" placeholder="yyyy-mm-dd" id="fecha-incorporacion" formControlName="fechaIncorporacion" [class.is-invalid]="fechaIncorporacionSanitized" ngbDatepicker #d2="ngbDatepicker">
                                                            <div class="input-group-append">
                                                                <div class="input-group-text" (click)="d2.toggle()">
                                                                    <i class="fa fa-calendar" style="cursor: pointer;"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12 col-md-6">
                                                    <div class="form-group col-md-12">
                                                        <div class="controls">
                                                            <label for="nombre-completo">Nombre Completo</label>
                                                            <input type="text" formControlName="nombreCompleto" [class.is-invalid]="nombreCortoSanitized" id="nombre-completo" class="form-control" [placeholder]="corporativo.NombreCompleto">
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-6">
                                                        <div class="controls">
                                                            <label for="url-sistema">Url del sistema *</label>
                                                            <input type="text" formControlName="url" id="url-sistema" class="form-control">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-12 col-md-3">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="status">Status *</label>
                                                            <select formControlName="status" [class.is-invalid]="statusSanitized" id="status" class="form-control">
                                                                <option value="0">Inactivo</option>
                                                                <option value="1">Activo</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12 d-flex flex-sm-row flex-column justify-content-end mt-3 mt-sm-2">
                                                    <div *ngIf="!editar">
                                                        <a class="btn btn-secondary mr-2" routerLink="/corporativos">Regresar</a>
                                                        <button (click)="permitirEditar()" class="btn btn-primary mb-2 mb-sm-0 mr-sm-2">Editar</button>
                                                    </div>
                                                    <div *ngIf="editar">
                                                        <button (click)="permitirEditar()" class="btn btn-secondary mr-2">Cancelar</button>
                                                        <button type="submit" class="btn btn-primary mb-2 mb-sm-0 mr-sm-2">Guardar Cambios</button>
                                                    </div>
                                                </div>
                                                <span *ngIf="mensaje" class="text-danger">Algo salio mal! Intenta nuevamente.</span>
                                            </div>
                                        </form>
                                    </div>
                                </ng-template>
                            </li>

                            <li [ngbNavItem]="2">
                                <a ngbNavLink class="nav-link d-flex align-items-center">
                                    <i class="ft-users mr-1"></i>
                                    <span class="d-none d-sm-block">Contactos</span>
                                </a>
                                <ng-template ngbNavContent>
                                    <div class="mt-2" id="information">
                                        <div class="media">
                                            <img [src]="corporativo.Logo" alt="logo" class="mr-3" height="64" width="64">
                                            <div class="media-body">
                                                <h4>{{corporativo.NombreCorto}}</h4>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="table-responsive">
                                                    <table class="table table-sm m-0">
                                                        <thead class="thead-light">
                                                            <tr>
                                                                <th>NOMBRE</th>
                                                                <th>PUESTO</th>
                                                                <th>TELÉFONO</th>
                                                                <th>CELULAR</th>
                                                                <th>EMAIL</th>
                                                                <th>OBSERVACIONES</th>
                                                                <th>ACCIONES</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let contacto of contactos; let i = index">
                                                                <td>{{ contacto.Nombre }}</td>
                                                                <td>{{ contacto.Puesto }}</td>
                                                                <td>{{ contacto.TelefonoFijo }}</td>
                                                                <td>{{ contacto.TelefonoMovil }}</td>
                                                                <td>{{ contacto.Email }}</td>
                                                                <td>{{ contacto.Comentarios }}</td>
                                                                <td>
                                                                    <a (click)="fillData(i)"><i class="ft-edit mr-2"></i></a>
                                                                    <a (click)="deleteContact(contacto.Id, i)"><i class="ft-trash"></i></a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <div *ngIf="contactos.length === 0" class="row justify-content-center">
                                            <span class="text-info">No existen contactos</span>
                                        </div>
                                        <hr>
                                        <br>
                                        <form novalidate [formGroup]="formcontacto" (ngSubmit)="contactActivity()">
                                            <div class="row">
                                                <div class="col-3">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="nombre">NOMBRE</label>
                                                            <input type="text" formControlName="nombre" [class.is-invalid]="nombreSanitized" id="nombre" class="form-control">
                                                            <div *ngIf="nombreSanitized" class="font-small-1 text-danger">Requerido</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="puesto">PUESTO</label>
                                                            <input type="text" formControlName="puesto" [class.is-invalid]="puestoSanitized" id="puesto" class="form-control">
                                                            <div *ngIf="puestoSanitized" class="font-small-1 text-danger">Requerido</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="comentarios">COMENTARIOS</label>
                                                            <input type="text" formControlName="comentarios" [class.is-invalid]="comentariosSanitized" id="comentarios" class="form-control">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-3">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="telefono-fijo">TELÉFONO FIJO</label>
                                                            <input type="text" formControlName="telefonoFijo" [class.is-invalid]="telefonoFijoSanitized" id="telefono-fijo" class="form-control">
                                                            <div *ngIf="telefonoFijoSanitized" class="font-small-1 text-danger">Ingrese un número de 10 digitos</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="telefono-movil">TELÉFONO MÓVIL</label>
                                                            <input type="text" formControlName="telefonoMovil" [class.is-invalid]="telefonoMovilSanitized" id="telefono-movil" class="form-control">
                                                            <div *ngIf="telefonoMovilSanitized" class="font-small-1 text-danger">Ingrese un número de 10 digitos</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="form-group">
                                                        <div class="controls">
                                                            <label for="email">EMAIL</label>
                                                            <input type="text" formControlName="email" [class.is-invalid]="emailSanitized" id="email" class="form-control">
                                                            <span *ngIf="emailSanitized" class="font-small-1 text-danger">Ingresa un correo valido</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-3 mt-4">
                                                    <button *ngIf="!actualizar" type="submit" class="btn btn-sm btn-secondary">AGREGAR CONTACTO</button>
                                                    <button *ngIf="actualizar" type="submit" class="btn btn-sm btn-secondary">ACTUALIZAR CONTACTO</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </ng-template>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div [ngbNavOutlet]="nav"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-1"></div>
    </div>
</section>